<!DOCTYPE html>
<html >
<body>
  <section class="page" id="attachment" data-bind="with: attachment">
    <div class="container" data-bind="if: latestVersion">
      <h1>

        <span data-bind="if: type"><span data-bind="text: type"></span></span>
        versio
        <span id="test-attachment-version" data-bind="version: latestVersion().version">0.0</span>
        Muokattu
        <span data-bind="dateString: latestVersion().created">31.10.2012</span>
      </h1>

      <!-- Preview images and pdf files only -->
      <div class="file-preview">
          <p>Esikatselua ei saatavilla.</p>
      </div>

      <div class="file-preview-actions">
        <span data-bind="if: isImage()">
        <a class="btn" data-bind="attr: {href: '/rest/view/' + latestVersion().fileId}">Suurenna</a>
        <br/>
        </span>
      </div>

      <div class="attachment-file-versions">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Tiedosto</th>
              <th>Versio</th>
              <th>Muokattu</th>
            </tr>
          </thead>
          <tbody data-bind="foreach: versions()">
            <tr style="cursor: pointer;">
              <td id="test-attachment-file-name"><a data-bind="text: $data.filename, attr: {href: '/rest/download/' + $data.fileId}" /></td>
              <td data-bind="version: version"></td>
              <td data-bind="dateString: created">31.10.2012</span>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="attachment-file-versions" data-bind="with: $root.comment">
        <hr/>
        <div class="span12">Keskustele liitteestä:</div>
          <table class="table table-striped">
            <tbody data-bind="foreach: comments">
              <tr class="comment">
                <td class="commentParty">
                  <span class="date" data-bind="dateTimeString: created"></span><br />
                  <span class="author" data-bind="text: user.firstName()+' '+user.lastName()"></span><br />
                  <b>(<span class="role" data-bind="ltext: user.role"></span>)</b>
                </td>
                <td data-bind="text: text"></td>
              </tr>
            </tbody>
          </table>
          <form class="well">
            <div class="row">
              <div class="span12">Keskustele hakemuksesta:</div>
            </div>
            <div class="row">&nbsp;</div>
            <textarea class="input-xlarge span5" id="commentText" data-bind="value: text, valueUpdate: 'afterkeydown'" rows="3" placeholder="Kirjoita viesti"></textarea>
            <div class="btn-toolbar">
              <button id="application.addComment" data-bind="disable: disabled, click: submit" type="submit" class="add-comment btn btn-primary">Lähetä viesti</button>
            </div>
          </form>
        </div>
      </div>

    </div>
  </section>
</body>
</html>
