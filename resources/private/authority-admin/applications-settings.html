<!DOCTYPE html>
<html>
<body>
  <section class="page" id="applications">
    <div class="container">

      <section>
        <h2 data-bind="ltext: 'auth-admin.required-fields-obligatory.title'"></h2>
        <input type="checkbox" class="form-input" id="required-fields-obligatory-enabled" data-test-id="required-fields-obligatory-enabled"
               data-bind="checked: organization.appRequiredFieldsFillingObligatory, enable: lupapisteApp.models.globalAuthModel.ok('set-organization-app-required-fields-filling-obligatory')" />
        <label for="required-fields-obligatory-enabled" class="form-label" data-bind="ltext: 'auth-admin.required-fields-obligatory.enabled'"></label>
      </section>

      <section>
        <h2 data-bind="ltext: 'auth-admin.organization-name'"></h2>
        <!-- ko if: lupapisteApp.models.currentUser.loaded() -->
        <div data-bind="component: 'organization-name-editor'"></div>
        <!-- /ko -->
      </section>

      <section>
        <h2 data-bind="ltext: 'auth-admin.tags'"></h2>
        <!-- ko if: lupapisteApp.models.currentUser.loaded() -->
        <div data-bind="component: 'tags-editor'"></div>
        <!-- /ko -->
      </section>

      <section>
        <h2 data-bind="ltext: 'auth-admin.email-notifications'"></h2>
        <p data-bind="lhtml: 'auth-admin.email-notifications.info'"></p>

        <table class="admin-settings">
          <thead>
            <tr>
              <th data-bind="ltext: 'auth-admin.email-notifications.param-name'"></th>
              <th data-bind="ltext: 'auth-admin.email-notifications.param-value'"></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td data-bind="ltext: 'auth-admin.email-notifications.neighbor'"></td>
              <td class="value">
                <input data-test-id="neighborOrderEmails" type="text" data-bind="value: organization.neighborOrderEmails, enable: lupapisteApp.models.globalAuthModel.ok('set-organization-neighbor-order-email')" />
              </td>
            </tr>
            <tr data-test-id="onSubmitEmails-row">
              <td data-bind="ltext: 'auth-admin.email-notifications.submit'"></td>
              <td class="value">
                <input data-test-id="onSubmitEmails" type="text" data-bind="value: organization.submitNotificationEmails, enable: lupapisteApp.models.globalAuthModel.ok('set-organization-submit-notification-email')" />
              </td>
            </tr>
            <tr>
              <td data-bind="ltext: 'auth-admin.email-notifications.inforequest'"></td>
              <td class="value">
                <input type="text" data-bind="value: organization.infoRequestNotificationEmails, enable: lupapisteApp.models.globalAuthModel.ok('set-organization-inforequest-notification-email')" />
              </td>
            </tr>
          </tbody>
        </table>
      </section>

      <!-- ko if: organization.permanentArchiveEnabled -->
      <section>
        <h2 data-bind="ltext: 'authorityAdmin.archive.heading'"></h2>
        <div class="permanent-archive-date-input">
          <label for="archiving-start-date" data-bind="ltext: 'authorityAdmin.archive.startDate'"></label>
          <input data-bind="datepicker: organization.permanentArchiveInUseSince, 
                            valueUpdate: 'afterkeydown',
                            enable: $root.authorization.ok('set-organization-permanent-archive-start-date'),
                            attr: {placeholder: loc('choose')}"
                 type="text"
                 id="archiving-start-date">
        </div>
      </section>
      <!-- /ko -->

      <section>
        <h2>Lataa lista organisaation avoimista hakemuksista</h2>
        <form action="/api/raw/open-applications-xlsx" method="get">
          <input type="hidden" name="__anti-forgery-token" data-bind="value: $.cookie('anti-csrf-token')">
          <input type="submit" value="Lataa"/>
        </form>
      </section>

    </div> <!-- container -->
  </section>
</body>
</html>
